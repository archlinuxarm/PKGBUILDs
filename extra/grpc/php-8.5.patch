From 4134a5ac820c07a10c62428eaefa55eba64a2030 Mon Sep 17 00:00:00 2001
From: Heena Bansal <heena.bansal20@ibm.com>
Date: Mon, 29 Sep 2025 10:41:41 -0400
Subject: [PATCH] Fix runtime error with PHp8.5 alpha because
 zend_exception_get_default is removed

---
 src/php/ext/grpc/call.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/php/ext/grpc/call.c b/src/php/ext/grpc/call.c
index 7bc711be67d23..a9f4c0bbb52e5 100644
--- a/src/php/ext/grpc/call.c
+++ b/src/php/ext/grpc/call.c
@@ -84,7 +84,11 @@ zval *grpc_parse_metadata_array(grpc_metadata_array
     if (php_grpc_zend_hash_find(array_hash, str_key, key_len, (void **)&data)
         == SUCCESS) {
       if (Z_TYPE_P(data) != IS_ARRAY) {
+#if PHP_VERSION_ID >= 80500
+        zend_throw_exception(zend_ce_exception,
+#else
         zend_throw_exception(zend_exception_get_default(TSRMLS_C),
+#endif
                              "Metadata hash somehow contains wrong types.",
                              1 TSRMLS_CC);
         efree(str_key);
