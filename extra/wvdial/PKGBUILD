# $Id: PKGBUILD 43140 2009-06-20 02:19:03Z allan $
# Maintainer: dorphell <dorphell@archlinux.org>
# Committer: Judd Vinet <jvinet@zeroflux.org>

pkgname=wvdial
pkgver=1.60
pkgrel=3
pkgdesc="A dialer program to connect to the Internet"
arch=('i686' 'x86_64')
license=('custom')
depends=('wvstreams>=4.4.1-2' 'ppp' 'xplc')
source=(http://alumnit.ca/download/${pkgname}-${pkgver}.tar.gz
        wvdial-1.60-build.patch)
url="http://alumnit.ca/wiki/index.php?page=WvDial"
md5sums=('27fbbde89f8fd9f6e735a8efa5217fc9'
         '1ff24bcd8fa83fa7f8dddc8ce6734b07')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}
  patch -Np1 -i ${srcdir}/wvdial-1.60-build.patch || return 1
  sed "s|prefix=.*|prefix=$startdir/pkg/usr|" -i Makefile || return 1
  sed "s|PPPDIR=.*|PPPDIR=$startdir/pkg/etc/ppp/peers|" -i Makefile || return 1
  make PREFIX=${pkgdir}/usr || return 1
  make PREFIX=${pkgdir}/usr PPPDIR=${pkgdir}/etc/ppp/peers install
  install -Dm644 COPYING.LIB ${pkgdir}/usr/share/licenses/${pkgname}/COPYING.LIB
}
