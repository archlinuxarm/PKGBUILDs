# $Id: PKGBUILD 36564 2009-04-24 21:19:31Z andyrtr $
# Maintainer: Andreas Radke <andyrtr@archlinux.org>

pkgname=libcups
pkgver=1.3.10
pkgrel=2
pkgdesc="The CUPS Printing System"
arch=(arm)
license=('GPL')
url="http://www.cups.org/"
depends=('gnutls>=2.6.5' 'libtiff' 'libpng' 'heimdal>=1.2.1-3') 
makedepends=('poppler>=0.10.6')
source=(ftp://ftp.easysw.com/pub/cups/${pkgver}/cups-${pkgver}-source.tar.bz2)
md5sums=('84fffe96b8537c81a463faccead80026')

build() {
  cd ${srcdir}/cups-${pkgver}
  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var \
     --with-logdir=/var/log/cups -with-docdir=/usr/share/cups/doc \
     --with-cups-user=daemon --with-cups-group=lp --enable-ssl=yes \
     --disable-ldap --disable-dbus --libdir=/usr/lib --enable-raw-printing \
     --enable-pdftops --with-pdftops=pdftops --with-optim="$CFLAGS"

  for dir in cups filter; do
    pushd ${dir}
    make
    make BUILDROOT=${pkgdir} install
    popd
  done

  mkdir -p ${startdir}/pkg/usr/bin
  install -m755 cups-config ${startdir}/pkg/usr/bin/cups-config
  #Remove filters
  rm -rf ${pkgdir}/usr/lib/cups
}
