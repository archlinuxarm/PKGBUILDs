# Maintainer: Johannes LÃ¶thberg <johannes@kyriasis.com>
# Maintainer: Robin Candau <antiz@archlinux.org>
# Contributor: Daniel Wallace <danielwallace at gtmanfred dot com>
# Contributor: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: ML <neldoreth>

# ALARM: David Beauchamp <david@archlinuxarm.org>
#  - moved xorg-server-xvfb and weston from checkdepends to makedepends

pkgname=zathura
pkgver=2026.02.03
pkgrel=2
pkgdesc="Minimalistic document viewer"
url="https://pwmt.org/projects/zathura/"
arch=('x86_64')
license=('Zlib')
depends=('girara' 'sqlite' 'desktop-file-utils' 'file' 'libsynctex' 'libseccomp' 'gtk3' 'glib2' 'json-glib')
makedepends=('appstream' 'python-sphinx' 'texlive-bin' 'meson' 'ninja' 'xorg-server-xvfb')
checkdepends=('weston')
optdepends=('zathura-djvu: DjVu support'
            'zathura-pdf-poppler: PDF support using Poppler'
            'zathura-pdf-mupdf: PDF support using MuPDF'
            'zathura-ps: PostScript support'
            'zathura-cb: Comic book support')
source=("${pkgname}-${pkgver}.tar.gz::https://github.com/pwmt/${pkgname}/archive/refs/tags/${pkgver}.tar.gz")
sha512sums=('c5b909e96690b85feca77c3399ad56f6843bd6ff25b1726d669ceb12ed1cd7f586908994074c7f31dcfd7df58e8298ceba2a18b0f7ca3415a4541baff7af1ba5')

build() {
        cd "${pkgname}-${pkgver}"
        arch-meson build
        ninja -C build
}

check() {
        cd "${pkgname}-${pkgver}"
        ninja -C build test
}

package() {
        cd "${pkgname}-${pkgver}"
        DESTDIR="${pkgdir}" ninja -C build install
        install -Dm 664 LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
