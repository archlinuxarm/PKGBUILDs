# Contributor: Andries Radu <admiral0 AT tuxfamily.org>

pkgname=fso-abyss-git
pkgver=20090921
pkgrel=1
pkgdesc="GSM 07.10 Multiplexer"
arch=('arm')
url="http://www.freesmartphone.org"
license=('GPL')
depends=(libgsm0710mux-git glib2 libfsobasics-git libfsotransport-git)
makedepends=(vala vala-misc-git)
_gitroot="git://git.freesmartphone.org/fso-abyss.git"
_gitname="fso-abyss"
build() {
	cd ${srcdir}
	msg "Connecting to git.freesmartphone.org GIT server...."

	if [ -d ${srcdir}/$_gitname ] ; then
		cd $_gitname && git pull origin
		msg "The local files are updated."
	else
		git clone $_gitroot
		cd $_gitname
	fi
	./autogen.sh
	./configure --prefix=/usr 
        make || return 1
        make DESTDIR=$pkgdir install || return 1
	mkdir $pkgdir/etc
	install abyss.conf $pkgdir/etc/
}
