Description: Enable SSE2 on i386 and amd64 CPUs only
Author: Emmanuel Bourg <ebourg@apache.org>
Forwarded: no
--- a/modules/media/src/main/native/gstreamer/projects/linux/avplugin/Makefile
+++ b/modules/media/src/main/native/gstreamer/projects/linux/avplugin/Makefile
@@ -19,7 +19,6 @@
 
 CFLAGS = -fPIC                   \
          -Werror=implicit-function-declaration \
-         -msse2                  \
          -fbuiltin               \
          -DHAVE_STDINT_H         \
          -DLINUX                 \
--- a/modules/media/src/main/native/gstreamer/projects/linux/fxplugins/Makefile
+++ b/modules/media/src/main/native/gstreamer/projects/linux/fxplugins/Makefile
@@ -16,7 +16,6 @@
 
 CFLAGS = -fPIC                   \
          -Werror=implicit-function-declaration \
-         -msse2                  \
          -fbuiltin               \
          -DHAVE_STDINT_H         \
          -DLINUX                 \
--- a/modules/media/src/main/native/jfxmedia/projects/linux/Makefile
+++ b/modules/media/src/main/native/jfxmedia/projects/linux/Makefile
@@ -38,7 +38,6 @@ ifdef HOST_COMPILE
 
 	CFLAGS += -fPIC \
                   -Werror=implicit-function-declaration \
-		  -msse2 \
 	          -DGSTREAMER_LITE
 
 	PACKAGES_INCLUDES := $(shell pkg-config --cflags glib-2.0)
--- a/modules/web/src/main/native/Tools/Scripts/webkitdirs.pm
+++ b/modules/web/src/main/native/Tools/Scripts/webkitdirs.pm
@@ -2037,7 +2037,7 @@
     # Compiler options to keep floating point values consistent
     # between 32-bit and 64-bit architectures.
     determineArchitecture();
-    if ($architecture ne "x86_64" && !isARM() && !isCrossCompilation() && !isAnyWindows()) {
+    if ($architecture eq "i686" && !isARM() && !isCrossCompilation() && !isAnyWindows()) {
         $ENV{'CXXFLAGS'} = "-march=pentium4 -msse2 -mfpmath=sse " . ($ENV{'CXXFLAGS'} || "");
     }
 
