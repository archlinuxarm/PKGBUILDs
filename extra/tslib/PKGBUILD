pkgname=tslib
pkgver=1.0
pkgrel=2
pkgdesc="Tslib - abstraction layer for touchscreen panels"
arch=(arm)
license=('custom')
url="http://tslib.berlios.de/"
depends=()
makedepends=()
install=(tslib.install)
source=(http://download.berlios.de/tslib/${pkgname}-${pkgver}.tar.bz2
        link-against-tslib.patch
        ts.conf
	tslib.sh)
md5sums=('92b2eb55b1e4ef7e2c0347069389390e' 
         '677a4193d7f677e82cd4fbcad43551b8'
         '6a314b8cb6e03206e74178336af2dc30'
   	 '09797e7f2790a79cb856f622c4126c96')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  patch -p1 < ../link-against-tslib.patch
  autoreconf -f -i -s || return 1
  ./configure --sysconfdir=/etc --prefix=/usr || return 1
  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
  install -m755 ../ts.conf "${pkgdir}/etc/ts.conf"
  mkdir -p "${pkgdir}/etc/profile.d/"
  install -m755 ../tslib.sh "${pkgdir}/etc/profile.d/"
  install -d -m755 "${pkgdir}/usr/share/licenses/${pkgname}"
  install -m644 COPYING "${pkgdir}/usr/share/licenses/${pkgname}/" || return 1
}
