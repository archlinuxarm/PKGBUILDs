# Maintainer: Philipp Scholl <pscholl@bawue.de>
pkgname=module-init-tools
pkgver=3.5
pkgrel=1
pkgdesc="utilities needed by Linux systems for managing loadable kernel modules"
arch=(arm)
url="http://kerneltools.org"
license=('GPL')
groups=('base')
depends=('glibc')
backup=('etc/modprobe.conf')
source=(http://www.kernel.org/pub/linux/utils/kernel/module-init-tools/module-init-tools-$pkgver.tar.bz2
        modprobe.conf)
md5sums=('2b47686247fc9a99bfdb9dd1d1d80e6f'
         '6db59d41e04941a790f80c1a4432faef')

build() {
  cd $startdir/src/$pkgname-$pkgver

  ./configure --prefix=/usr --exec-prefix=/
  make || return 1
  make DESTDIR=$startdir/pkg install || return 1

  # Remove old-school conversion util... we haven't shipped modules.conf in years
  rm $pkgdir/sbin/generate-modprobe.conf
  # Install our custom (read: empty) modprobe.conf
  install -D -m644 ../modprobe.conf $startdir/pkg/etc/modprobe.conf

}
