# Contributor: G_Syme <demichan(at)mail(dot)upb(dot)de>
pkgname=p910nd
pkgver=0.93
pkgrel=1
pkgdesc="A small printer daemon intended for diskless workstations that passes jobs directly to the printer"
arch=('i686' 'x86_64')
url="http://p910nd.sourceforge.net"
license=('GPL2')
backup=('etc/conf.d/p910nd')
options=('emptydirs')
source=(http://downloads.sf.net/$pkgname/$pkgname-$pkgver.tar.bz2 \
        $pkgname.init)
md5sums=('f668eace7f424953c3aa48afcb34c62b'
         'e44be17ad714c366300289cb8aaa3f3a')

build() {
  cd $srcdir/$pkgname-$pkgver
#  sed -e 's|/etc/sysconfig|/etc/conf.d|g' -i $pkgname.init || return 1
  sed -e "s|/var/lock/subsys|/var/lock/$pkgname|" -i $pkgname.c || return 1
  make CONFIGDIR=/etc/conf.d SCRIPTDIR=/etc/rc.d || return 1
  make CONFIGDIR=/etc/conf.d SCRIPTDIR=/etc/rc.d DESTDIR=$pkgdir install || return 1
  install -m755 $srcdir/$pkgname.init $pkgdir/etc/rc.d/$pkgname || return 1
  install -d -m755 $pkgdir/var/lock/$pkgname
  chmod 1777 $pkgdir/var/lock
}
