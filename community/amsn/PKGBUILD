# $Id: PKGBUILD 351 2009-07-26 17:03:19Z jlichtblau $
# Maintainer: Jaroslav Lichtblau <dragonlord@aur.archlinux.org>
# Contributor: Giovanni Scafora <giovanni@archlinux.org>
# Contributor: Jeff Mickey <j@codemac.net>

pkgname=amsn
pkgver=0.97.2
pkgrel=14
pkgdesc="MSN client written in Tcl/Tk"
arch=('i686' 'x86_64')
url="http://amsn.sourceforge.net/"
license=('GPL2')
depends=('imlib' 'libjpeg' 'libx11' 'libpng' 'libsm' 'libtiff' 'perl' 'python' 'tk>=8.5.7' 'tls')
makedepends=('pkgconfig' 'patch')
source=(http://downloads.sourceforge.net/sourceforge/${pkgname}/${pkgname}-${pkgver}.tar.bz2 \
        $pkgname-jpeg7.patch)

md5sums=('6c494d97b5ab810f1b265ef19bf652b0'
         '0e26454d4ab646f444517f089da81ac6')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}

  patch -Np0 -i ${srcdir}/$pkgname-jpeg7.patch || return 1

  ./configure --prefix=/usr
  make || return 1
  make DESTDIR=${pkgdir} install

#fix links
  cd ${pkgdir}/usr/bin || return 1
  rm * || return 1
  ln -sf /usr/share/amsn/amsn amsn || return 1
  ln -sf /usr/share/amsn/amsn-remote amsn-remote || return 1
  ln -sf /usr/share/amsn/amsn-remote-CLI amsn-remote-CLI || return 1
}
