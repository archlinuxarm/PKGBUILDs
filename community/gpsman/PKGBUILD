# $Id: PKGBUILD 1196 2009-08-13 22:26:47Z dgriffiths $
# Maintainer: dibblethewrecker dibblethewrecker.at.jiwe.dot.org

pkgname=gpsman
pkgver=6.4
pkgrel=3
pkgdesc="GPS Manager is a graphical GPS data manager for preparing, inspectiing and editing GPS data"
arch=('i686' 'x86_64')
url="http://www.ncc.up.pt/gpsman"
license=('GPL')
depends=('tcl')
optdepends=('gpsmanshp: shapefile support')
install=gpsman.install
source=(http://www.ncc.up.pt/gpsman/gpsmanhtml/$pkgname-$pkgver.tgz
	'gpsman.desktop')

build() {
  cd $startdir/src/$pkgname-$pkgver
  mkdir -p $startdir/pkg/usr/{bin,share/$pkgname}

  # set path to program files
  sed -i "s|set SRCDIR gmsrc|set SRCDIR /usr/share/gpsman|g" ./gpsman.tcl
  install -m755 gpsman.tcl $startdir/pkg/usr/bin/gpsman.tcl

  # install a gpsman launcher
  install -m755 util/gpsman.sh $startdir/pkg/usr/bin/gpsman || return 1

  #install program files
  cp -r gmsrc/* $startdir/pkg/usr/share/gpsman/ || return 1
  chmod 755 $startdir/pkg/usr/share/gpsman/*.tcl
  chmod -R 755 $startdir/pkg/usr/share/gpsman/gmicons

  # install some freedesktop.org compatibility
  install -D -m644 $startdir/src/$pkgname.desktop \
      $startdir/pkg/usr/share/applications/$pkgname.desktop
}
md5sums=('3a47f1953e0bad1ea3a79aba0a713f1a'
         '0341f110f61e57b316fad7bee483665b')
