# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Contributor: Jaroslaw Swierczynski <swiergot@juvepoland.com>

pkgname=libcgi
pkgver=1.0
pkgrel=4
pkgdesc="A powerful and easy to use library for writing CGI applications in C"
arch=('i686' 'x86_64')
url="http://libcgi.sourceforge.net/"
license=("GPL")
depends=('glibc')
source=(http://downloads.sourceforge.net/sourceforge/$pkgname/$pkgname-$pkgver.tar.gz)
md5sums=('110af367081d33c7ed6527a1a60fc274')

build() {
  cd $startdir/src/$pkgname-$pkgver
  sed -i "s/\(hextable\['e'\] = \)13/\114/" src/cgi.c
  #Arch64 Fix
   if [ "$CARCH" = "x86_64" ]; then
      export CFLAGS="$CFLAGS -fPIC"
      export CXXFLAGS="$CFLAGS"
   fi
  ./configure --prefix=/usr
  make || return 1
  mkdir -p $startdir/pkg/usr/{lib,include}
  make prefix=$startdir/pkg/usr install
}
