# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Maintainer: eric <eric@archlinux.org>
# Contributor: Aurelien Foret <orelien@chez.com>

pkgname=wdm
pkgver=1.28
pkgrel=3
pkgdesc="An replacement X window display manager similar to, and based on XDM"
arch=(i686 x86_64)
depends=('windowmaker' 'pam' 'bash' 'libxmu')
license=('GPL')
source=(http://voins.program.ru/$pkgname/$pkgname-$pkgver.tar.bz2)
url="http://voins.program.ru/wdm/"
md5sums=('4da8ffe3af233305786d9b6aab78b838')

build() {
  cd $startdir/src/$pkgname-$pkgver
  ./configure --prefix=/usr --with-nlsdir=/usr/share/locale \
      --sysconfdir=/etc/wdm --with-wdmdir=/etc/wdm
  /usr/bin/make || return 1
  /usr/bin/make DESTDIR=$startdir/pkg install
  # used /etc/pam.d/xscreensaver as an example
  #
  /bin/echo "auth	required	pam_unix_auth.so" > $startdir/pkg/etc/pam.d/wdm
  /bin/chmod 0644 $startdir/pkg/etc/wdm/wdm-config
  /bin/chmod 0755 $startdir/pkg/etc/wdm/authdir
  /bin/chmod 0755 $startdir/pkg/var
  /bin/chmod 0755 $startdir/pkg/var/run
  /bin/chmod 0755 $startdir/pkg/var/run/wdm
}
# vim: ts=2 sw=2 et ft=sh
