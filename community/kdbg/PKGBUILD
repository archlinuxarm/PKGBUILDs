# $Id: PKGBUILD 2003 2009-09-07 13:55:21Z spupykin $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Maintainer: Eric Belanger <belanger@astro.umontreal.ca>
# Contributor: Jason Taylor <jftaylor21@gmail.com> 
# Contributor: Georg Grabler <ggrabler@chello.at>

pkgname=kdbg
pkgver=2.2.0
pkgrel=1
pkgdesc="A gdb GUI for KDE."
arch=('i686' 'x86_64')
url="http://www.kdbg.org"
license=("GPL")
depends=('kdelibs3' 'gdb')
options=('libtool')
source=(http://downloads.sourceforge.net/kdbg/$pkgname-$pkgver.tar.gz)
md5sums=('8ddbf6cad5dbb645d6d5192d420116e3')

build() {
  cd $startdir/src/$pkgname-$pkgver
  [ $NOEXTRACT -eq 1 ] || ./configure --prefix=/opt/kde --with-qt-dir=/opt/qt --without-arts

  sed -i 's#= strstr#= (char*)strstr#' src/kdbg-2.2.0/kdbg/gdbdriver.cpp
  sed -i 's#= strchr#= (char*)strchr#' src/kdbg-2.2.0/kdbg/xsldbgdriver.cpp
  sed -i 's#= strchr#= (char*)strchr#' src/kdbg-2.2.0/kdbg/gdbdriver.cpp

  make || return 1
  make DESTDIR=$startdir/pkg install
}
