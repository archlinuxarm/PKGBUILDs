# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Ronald van Haren <ronald.archlinux.org>
# Contributor: JJDaNiMoTh <jjdanimoth.aur@gmail.com>

pkgname=compiz-decorator-kde
pkgver=0.8.2
pkgrel=1
pkgdesc="Decorator of Compiz for KDE"
url="http://www.go-compiz.org/"
license=('GPL2' 'LGPL2' 'MIT')
arch=('i686' 'x86_64')
groups=('compiz' 'compiz-kde')
depends=('kdebase-workspace' 'compiz-core')
makedepends=('libgl' 'perlxml' 'intltool>=0.23')
options=(!libtool !emptydirs)
conflicts=('compiz-git' 'compiz-decorator-kde-git')
source=(http://releases.compiz.org/core/compiz-$pkgver.tar.gz)
md5sums=('5815da87a0cfc014d06378cb3a2efcd5')

build()
{
  cd $srcdir/compiz-$pkgver

  ./configure --prefix=/usr \
	    --disable-gnome \
	    --disable-librsvg \
	    --disable-metacity \
	    --disable-gtk \
	    --disable-gconf \
	    --disable-dbus \
	    --disable-annotate \
	    --disable-place \
	    --disable-glib \
	    --disable-kde \
            --enable-kde4 || return 1

  make || return 1
  make DESTDIR=$pkgdir install || return 1

  # Let's remove stuff that are in compiz-core package
  rm -rf $startdir/pkg/usr/{include,lib}
  rm -rf $startdir/pkg/usr/bin/compiz
  rm -rf $startdir/pkg/usr/share

# install MIT license
install -Dm644 $srcdir/compiz-$pkgver/COPYING.MIT \
        $pkgdir/usr/share/licenses/$pkgname/COPYING.MIT
}
