# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: insulae <insulae@gmail.com>

pkgname=hex-a-hop
pkgver=20070705
pkgrel=6
pkgdesc="Hex-a-hop is a puzzle game based on hexagonal tiles"
arch=(i686 x86_64)
url="http://packages.debian.org/testing/games/hex-a-hop"
license=('GPL')
depends=('sdl')
makedepends=()
options=()
source=(http://archlinux-stuff.googlecode.com/files/hex-a-hop.tar.gz \
	arch.patch)
md5sums=('4e9f11dcd85217b7f0c5461edc961822'
         'b7b32dc728ef948267c8a35f3384867b')

build() {
  cd $startdir/src/$pkgname

  patch -Np1 <../arch.patch

  make || return 1

  mkdir -p $startdir/pkg/usr/{share,bin}
  mkdir -p $startdir/pkg/usr/share/hex-a-hop

  install -m 755 Hex-a-hop $startdir/pkg/usr/share/hex-a-hop || return 1
  install -m 644 levels.dat $startdir/pkg/usr/share/hex-a-hop || return 1 
  cp -r graphics $startdir/pkg/usr/share/hex-a-hop || return 1 

  cat >$startdir/pkg/usr/bin/hex-a-hop <<EOF || return 1
#!/bin/sh
mkdir -p \$HOME/.hex-a-hop && \
exec /usr/share/hex-a-hop/Hex-a-hop \$HOME/.hex-a-hop
EOF
  chmod 775 $startdir/pkg/usr/bin/hex-a-hop || return 1

  cd $startdir/pkg/usr/share/hex-a-hop/graphics && \
  chmod 644 *.* 
}
