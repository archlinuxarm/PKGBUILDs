# Maintainer: Jeff Mickey <j@codemac.net>
# Contributor: Shadowhand <woody.gilk@gmail.com>

pkgname=lomoco
pkgver=1.0
pkgrel=4
url="http://www.lomoco.org/"
pkgdesc="Logitech USB mouse configuration program"
license=('GPL')
depends=('libusb')
conflicts=()
replaces=('lmctl')
arch=('i686' 'x86_64')
source=(http://lomoco.linux-gamers.net/files/$pkgname-$pkgver.tar.gz
        lomoco_mouse.conf toudev.awk.patch)
options=(!libtool)


build() {
  cd $startdir/src/$pkgname-$pkgver
  patch -p0 -i ../toudev.awk.patch
  ./autogen.sh --prefix=/usr
  make || return 1
  make udev-rules || return 1
  make DESTDIR=$startdir/pkg install || return 1
  
  #Fix and install udev rules and helpers
  sed -i 's|/etc/sysconfig/logitech_mouse|/etc/udev/lomoco_mouse.conf|g' udev/udev.lomoco
  sed -i 's|RUN="lomoco"|RUN+="lomoco.sh"|g' udev/lomoco.rules
  install -D -m 644 udev/lomoco.rules $startdir/pkg/etc/udev/rules.d/80-lomoco.rules
  install -D -m 755 udev/udev.lomoco $startdir/pkg/lib/udev/lomoco.sh
  install -D -m 644 ../lomoco_mouse.conf $startdir/pkg/etc/udev/
}

md5sums=('f5197d0a3ee81229c3eecc1e03f7b08d'
         'e350a89af308fdf1d989e42a8290210f'
         'b09849b36dd19ffbed3148d0591d2c8c')
sha1sums=('bb2c43e3ca801358fb4f309a2adc6787bffb8e37'
          '10ede9f15e066d72f7ce8493cf9530b60d82a874'
          '9a178614b83226f68f9f4a6e87e597943fafe74f')
