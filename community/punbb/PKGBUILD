# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Sergej Pupykin <pupykin.s+arch@gmail.com>

pkgname=punbb
pkgver=1.3.2
pkgrel=1
pkgdesc="forum engine"
arch=('i686' 'x86_64')
url="http://punbb.informer.com"
license=("GPL")
depends=(php)
backup=('srv/http/punbb/.htaccess')
source=(http://punbb.informer.com/download/$pkgname-$pkgver.zip \
        http://punbb.informer.com/extensions/pun_antispam/pun_antispam.tgz)
md5sums=('75ee43a99a72b76eedb777e3c8726f24'
         '020285a46c62309fe0c3a02382d577b0')

build() {
  cd $srcdir
  install -d -m0755 $pkgdir/srv/http && \
  cp -r $pkgname-$pkgver $pkgdir/srv/http/punbb && \
  echo "deny from all" > $pkgdir/srv/http/punbb/.htaccess || return 1

  cp -r $srcdir/pun_antispam $pkgdir/srv/http/punbb/extensions || return 1

  cd $pkgdir
  find -type d -exec chmod 0755 {} \; && \
  find -type f -exec chmod 0644 {} \; && \
  chmod 0777 $pkgdir/srv/http/punbb/img/avatars $pkgdir/srv/http/punbb/cache
}
