# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Allan McRae <allan@archlinux.org>
# Contributor: Alessio 'alexwizard' Sergi <sergi.alessio {at} gmail.com>

pkgname=flickrnet
pkgver=2.1.5
pkgrel=2
pkgdesc="Flickr.Net API Library"
arch=('i686' 'x86_64')
url="http://www.codeplex.com/FlickrNet"
license=('LGPL')
depends=('mono')
makedepends=('pkgconfig')
source=(FlickrNet-25207.zip  #http://www.codeplex.com/Project/Download/FileDownload.aspx?ProjectName=FlickrNet&DownloadId=16745
        AssemblyInfo.patch
        flickrnet.pc)
md5sums=('d20fe0d25a3888300f21e5ad3895c141'
         '7bb35c91ff63c44aa0773c5f35dad226'
         '131dd6e01f99c0533e9367b5cfda3a13')

build() {
  export MONO_SHARED_DIR="$srcdir/.wabi"
  mkdir -p "${MONO_SHARED_DIR}"
  
  cd $srcdir/FlickrNet
  patch -Np0 -i $srcdir/AssemblyInfo.patch

  gmcs -target:library -out:FlickrNet.dll -r:System.Web.dll *.cs || return 1
  install -Dm644 FlickrNet.dll $pkgdir/usr/lib/mono/flickrnet-$pkgver/FlickrNet.dll

  install -Dm644 $srcdir/flickrnet.pc $pkgdir/usr/lib/pkgconfig/flickrnet.pc
  sed -i "s/@VERSION@/$pkgver/" $pkgdir/usr/lib/pkgconfig/flickrnet.pc
}
