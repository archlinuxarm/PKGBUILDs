# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Douglas Soares de Andrade <dsandrade@gmail.com>

pkgname=kcheckers
pkgver=0.8.1
pkgrel=5
pkgdesc="Qt4-based checkers boardgame"
arch=('i686' 'x86_64')
url="http://qcheckers.sourceforge.net/"
license=('GPL')
depends=('qt')
source=("http://wibix.de/infusions/pro_download_panel/file.php?did=15&file_id=9"
kcheckers.desktop)

md5sums=('793736a007cd92122dfd91bcfd14ab69'
         '8b8682edd870c2692f9c7d538263e0f5')

build() {
	# Changing the pkg name to a normal one and uncompressing ;o)
 	mv "file.php?did=15&file_id=9" $pkgname-$pkgver.tar.gz	
	tar -zxvf $pkgname-$pkgver.tar.gz

	cd $startdir/src/$pkgname-$pkgver
	
	# Correcting the prefix and compiling it
	sed -i 's#/usr/local#/usr#' common.h
	qmake kcheckers.pro
	make

	# Building it
	mkdir -p $startdir/pkg/usr/share/kcheckers
	mkdir -p $startdir/pkg/usr/bin

	install -m755 kcheckers $startdir/pkg/usr/bin
	cp -R i18n icons themes $startdir/pkg/usr/share/kcheckers
	chmod 644 $startdir/pkg/usr/share/kcheckers/i18n/{kcheckers_fr.ts,kcheckers_ru.ts}
    install -D -m644 $startdir/$pkgname.desktop $startdir/pkg/usr/share/applications/$pkgname.desktop

} 
