# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
#Maintainer: Biru Ionut <biru.ionut at gmail.com>
#Contributor: Hugo Doria <hugo@archlinux.org>
#Contributor: Sergej Chodarev <sergejx@centrum.sk>
#Contributor: zhuqin <zhuqin83@gmail.com>

pkgname=gedit-plugins
pkgver=2.26.2
pkgrel=1
pkgdesc="Set of plugins for gedit"
arch=('i686' 'x86_64')
license=('GPL')
url="http://live.gnome.org/GeditPlugins"
depends=('gedit' 'vte' 'gucharmap' 'gnome-python')
makedepends=('intltool' 'pkgconfig' 'gnome-doc-utils' 'gnome-common')
options=('!libtool' '!emptydirs')
install=gedit-plugins.install
source=(ftp://ftp.gnome.org/pub/gnome/sources/gedit-plugins/2.26/$pkgname-$pkgver.tar.bz2
	libtool.patch)

build() {
  cd $srcdir/$pkgname-$pkgver
  patch -p0 <../libtool.patch || return 1
  ./autogen.sh --prefix=/usr --sysconfdir=/etc --with-plugins=all || return 1

  make || return 1
  make GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=1 DESTDIR=$pkgdir install || return 1

  install -m755 -d $pkgdir/usr/share/gconf/schemas
  gconf-merge-schema $pkgdir/usr/share/gconf/schemas/${pkgname}.schemas $pkgdir/etc/gconf/schemas/*.schemas
  rm -f $pkgdir/etc/gconf/schemas/*.schemas
}
md5sums=('382cdc76fc1d59fcf7625be1b8afaac3'
         '2372df950bf2f37bf54a230419bea181')
