# Maintainer Stefan Husmann <stefan-husmann@t-online.de>
# Contributor: Mihai Militaru <mihai.militaru@gmx.com>
# Contributor: scippio <scippio@berounet.cz>

pkgname=freeimage-legacy
pkgver=3.11.0
pkgrel=1
pkgdesc="Library project for developers who would like to support popular graphics image formats."
arch=('i686' 'x86_64')
license=('GPL' 'custom:FIPL')
url="http://freeimage.sourceforge.net/"
depends=('gcc-libs')
makedepends=('hd2u')
conflicts=('freeimage')
provides=('freeimage')
source=(http://dfn.dl.sourceforge.net/sourceforge/freeimage/FreeImage3110.zip \
  'paths.patch')
md5sums=('ad1db36414391417654ba7bf1c0277d3' '66e0fa729ab7d08b6a635b4c1921521c')
install=freeimage.install

build() {
  cd ${srcdir}/FreeImage

  patch -p1 < ../paths.patch || return 1

  make || return 1
  install -d ${pkgdir}/usr/include
  install -d ${pkgdir}/usr/lib
  make DESTDIR=${pkgdir} install || return 1
  make -f Makefile.fip || return 1
  make -f Makefile.fip DESTDIR=${pkgdir} install || return 1
  install -Dm644 $srcdir/FreeImage/license-fi.txt \
    $pkgdir/usr/share/licenses/$pkgname/license-fi.txt
  
}
