# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Sergej Pupykin <pupykin.s+arch@gmail.com>

pkgname=xkbsel
pkgver=0.13
pkgrel=2
pkgdesc="framework for defining, selecting and indicating XKB keyboard mappings"
arch=('i686' 'x86_64')
url="http://www.meduna.org/sw_xkbsel_en.html"
license=('GPL')
depends=('gdbm' 'libxaw')
makedepends=('patch')
source=(http://www.meduna.org/code/$pkgname-$pkgver.tar.gz \
	build-fix.patch)
md5sums=('c82196344ef920a072f413df85b9dc00' 'dee0f7de8618d9eff073942f0e08f030')

build() {
  cd $startdir/src/$pkgname-$pkgver
  patch -Np1 <../build-fix.patch
  export LDFLAGS="-lgdbm -lgdbm_compat" 
  ./configure --prefix=/usr --localstatedir=/var/lib --sysconfdir=/etc/xkbsel \
		--build=`uname -m` --host=`uname -m` --target=`uname -m`
  make || return 1
  make DESTDIR=$startdir/pkg install || return 1
}
