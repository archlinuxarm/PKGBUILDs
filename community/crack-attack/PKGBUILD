# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Eric Belanger <belanger@astro.umontreal.ca>
# Contributor: Claudio Riva <firetux83@gmail.com>

pkgname=crack-attack
pkgver=1.1.14
pkgrel=4
pkgdesc="A free OpenGL game based on the Super Nintendo classic Tetris Attack"
arch=('i686' 'x86_64')
url="http://www.nongnu.org/crack-attack/"
license=("GPL")
depends=('gtk2' 'libxmu' 'freeglut')
makedepends=('pkgconfig')
source=(http://download.savannah.gnu.org/releases/$pkgname/$pkgname-$pkgver.tar.gz freeglut.patch)
md5sums=('262445024b0fca44508355242ea29d71' '2b7b81fee2632bafe7836e2e96e03b7a')

build() {
  cd $startdir/src/$pkgname-$pkgver
  patch -Np0 -i ../freeglut.patch || return 1
  ./configure --prefix=/usr --sysconfdir=/etc --with-x
  make || return 1
  make DESTDIR=$startdir/pkg install
# Fixing .desktop file (for Gnome menu)
  cd $startdir/pkg/usr/share/crack-attack
  sed -i 's/Games/Game/' crack-attack.desktop
  install -D -m644 crack-attack.desktop $startdir/pkg/usr/share/applications/crack-attack.desktop
  install -D -m644 crack-attack.xpm $startdir/pkg/usr/share/pixmaps/crack-attack.xpm
}
