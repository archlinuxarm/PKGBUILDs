# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Sergej Pupykin <pupykin.s+arch@gmail.com>

pkgname=kvirc
pkgver=3.4.2
pkgrel=2
pkgdesc="Qt-based IRC client"
url="http://www.kvirc.net"
depends=(qt3 libx11 libsm libice openssl fontconfig freetype2 expat libxt libxss zlib audiofile esound libxinerama libdrm libgl gcc)
arch=(i686 x86_64)
makedepends=()
license=('GPL')
options=("!libtool" "!makeflags")
source=(ftp://ftp.kvirc.de/pub/kvirc/$pkgver/source/kvirc-$pkgver.tar.bz2)
md5sums=('cc1839c54f6c1bf9a15e169f3213a0a7')

build() {
  cd $startdir/src/kvirc-$pkgver

  ./configure \
    --prefix=/usr \
    --disable-rpath \
    --disable-static \
    --enable-shared \
    --enable-dependency-tracking \
    --enable-optimisation=2 \
    --with-ix86-asm \
    --enable-perl \
    --with-x \
    --without-kde-support \
    --with-qt-include-dir=/opt/qt/include \
    --with-qt-library-dir=/opt/qt/lib \
    --with-qt-moc=/opt/qt/bin/moc

  make || return 1
  make DESTDIR=$startdir/pkg install || return 1
}
