# $Id: PKGBUILD 2064 2009-09-08 06:21:14Z spupykin $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>

pkgname=greycstoration
pkgver=2.9
pkgrel=3
pkgdesc="image denoising and interpolation"
arch=('i686' 'x86_64')
url="http://www.greyc.ensicaen.fr/~dtschump/greycstoration/"
license=("GPL")
depends=(gcc-libs libxext)
makedepends=(gimp)
source=("http://downloads.sourceforge.net/cimg/GREYCstoration-$pkgver.zip")
md5sums=('67b6bfcadd485ee4669069da52a1e8f5')

build () {
  cd $startdir/src/GREYCstoration-$pkgver/src
  sed -i 's|CIMG_XRANDR_FLAGS = -Dcimg_use_xrandr -lXrandr|#CIMG_XRANDR_FLAGS = -Dcimg_use_xrandr -lXrandr|' Makefile
  sed -i 's|#include "../CImg.h"|#include "CImg.h"|' greycstoration.cpp
#  sed -i 's|g++|g++-3.4|' Makefile
  make linux || return 1
  install -D -m0755 greycstoration4gimp $startdir/pkg/usr/bin/greycstoration4gimp && \
  install -D -m0755 greycstoration $startdir/pkg/usr/bin/greycstoration
}
