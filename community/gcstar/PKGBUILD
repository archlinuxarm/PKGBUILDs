# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: William Rea <sillywilly@gmail.com>

pkgname=gcstar
pkgver=1.4.3
pkgrel=2
pkgdesc="A collection management application"
arch=(i686 x86_64)
url="http://www.gcstar.org"
license=("GPL")
conflicts=('gcfilms')
replaces=('gcfilms')
provides=('gcfilms')
source=(http://download.gna.org/gcstar/gcstar-$pkgver.tar.gz )
depends=('gtk2-perl' 'perl-libwww' 'perl-xml-simple' \
         'perl-net-snmp' 'perlxml' \
	 'perl-xml-libxml')
md5sums=('a4182efaf0f81fba39d1ab8b9b582417')

build() {
  cd $startdir/src/gcstar
  ./install  --prefix=$startdir/pkg/usr
  install -D -m644 $startdir/pkg/usr/share/gcstar/icons/gcstar_32x32.png \
                   $startdir/pkg/usr/share/pixmaps/gcstar.png && \
  cp -R share/applications $startdir/pkg/usr/share || return 1

  mv $startdir/pkg/usr/man $startdir/pkg/usr/share && \
  patch -p0 $pkgdir/usr/lib/gcstar/GCGraphicComponents.pm <<EOF
2381a2382,2383
> 	    return if \$self->{settingTip};
>             \$self->{settingTip} = 1;
2391a2394
>             \$self->{settingTip} = 0;
EOF
}
