# Contributor: Hugo Doria <hugodoria@archlinux-br.org>

pkgname=gnome-system-tools
pkgver=2.22.2
pkgrel=1
pkgdesc="Gnome System Configuration Utilities"
arch=('i686' 'x86_64')
url="http://www.gnome.org/projects/gst/"
license=('GPL')
depends=('wireless_tools' 'liboobs>=2.22' 'nautilus>=2.22' 'libgnomeui' 'libglade')
makedepends=('perlxml' 'gnome-doc-utils>=0.12.0' 'pkgconfig' 'intltool>=0.40')
install=gnome-system-tools.install
source=(http://ftp.gnome.org/pub/gnome/sources/${pkgname}/2.22/${pkgname}-${pkgver}.tar.bz2 network.patch)
md5sums=('c2c9a2570dd01a38b46a6adb91a2cb2f' 'dc12d7a088a73ffd20d9a4b192679e7b')

build() {
  
  	cd $startdir/src/${pkgname}-${pkgver}/src/network
		
	patch -Np0 -i $startdir/src/network.patch || return 1

	cd $startdir/src/${pkgname}-${pkgver}

	./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var
	make || return 1
	make DESTDIR=${startdir}/pkg GCONFTOOL=/bin/true install
	
	mkdir -p ${startdir}/pkg/usr/share/gconf/schemas
	gconf-merge-schema ${startdir}/pkg/usr/share/gconf/schemas/${pkgname}.schemas ${startdir}/pkg/etc/gconf/schemas/*.schemas
	rm -f ${startdir}/pkg/etc/gconf/schemas/*.schemas

}
