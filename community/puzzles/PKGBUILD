# Contributor: Geoffroy Carrier <geoffroy.carrier@koon.fr> 
pkgname=puzzles
pkgver=8541
pkgrel=1
pkgdesc="Simon Tatham's Portable Puzzle Collection"
arch=('i686' 'x86_64')
url="http://www.chiark.greenend.org.uk/~sgtatham/puzzles/"
license=('MIT')
makedepends=('pkgconfig')
depends=('gtk2')
source=(http://www.chiark.greenend.org.uk/~sgtatham/puzzles/puzzles.tar.gz)
build() {
  cd "$srcdir/$pkgname-r$pkgver"
  #fix gcc4.4 compiling
  patch -Np1 -i $startdir/106_fix-uninit-warning.diff || return 1

  sed -i 's|\$(gamesdir)|\$(bindir)|' Makefile
  install -d $pkgdir/usr/bin $pkgdir/usr/share/licenses/$pkgname
  install -Dm644 LICENCE $pkgdir/usr/share/licenses/$pkgname/
  make prefix=/usr || return 1
  make prefix=/usr DESTDIR="$pkgdir" install || return 1
  #fix FS#14600
  mv "$pkgdir/usr/bin/net" "$pkgdir/usr/bin/puzzles-net" && \
  mv "$pkgdir/usr/bin/cube" "$pkgdir/usr/bin/puzzles-cube" && \
  mv "$pkgdir/usr/bin/blackbox" "$pkgdir/usr/bin/puzzles-blackbox" || return 1

}

md5sums=('43f474e88dbe217c076d77a22f4a1423')
