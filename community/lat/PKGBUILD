# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: William Rea <sillywilly@gmail.com>

pkgname=lat
pkgver=1.2.3
pkgrel=1
pkgdesc="LDAP Administration Tool"
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/ldap-at/"
license=("GPL")
depends=('gnome-keyring' 'gtk-sharp-2' 'avahi' 'gnome-sharp')
makedepends=('gettext' 'intltool' 'pkgconfig')
install=$pkgname.install
source=(http://downloads.sourceforge.net/ldap-at/lat-$pkgver.tar.gz)
md5sums=('0725508d180720d260a70c5b39d387ba')

build() {
  export MONO_SHARED_DIR=$startdir/src/.wabi
  mkdir -p $MONO_SHARED_DIR
  cd $startdir/src/lat-$pkgver
  find . -name Makefile.in -exec sed -i -e 's/-scrollkeeper-update.*//' {} \;
  if [ -f omf.make ]; then
    sed -i -e 's/-scrollkeeper-update.*//' omf.make
  fi

  ./configure --prefix=/usr --enable-avahi=yes
  make || return 1
  make DESTDIR=$startdir/pkg install

  rm -rf $MONO_SHARED_DIR
}
