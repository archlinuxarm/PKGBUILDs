# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Maintainer: Kritoke <kritoke@nospam.gmail.com>
# Contributor: Kritoke <kritoke@nospam.gmail.com>
 
pkgname=xmms-imms
pkgver=3.1.0_rc8
pkgrel=1
pkgdesc="An intelligent playlist plug-in for XMMS that tracks your listening patterns and dynamically adapts to your taste."
arch=(i686 x86_64)
license=("GPL")
url="http://imms.luminal.org/"
depends=('xmms' 'pcre' 'sqlite3' 'taglib' 'glib2' 'sox' 'torch')
replaces=('imms')
source=(http://imms.googlecode.com/files/imms-${pkgver/_/-}.tar.bz2)
md5sums=('31b77cbc2dba334b039c5618bbbf203e')

build() {
  cd $startdir/src/imms-${pkgver/_/-}


  if [ $NOEXTRACT -ne 1 ]; then
    autoheader
    aclocal
    autoconf
    ./configure --prefix=/usr --disable-immsremote
  fi

  make || return 1
  mkdir -p $startdir/pkg/usr/bin
  make prefix=$startdir/pkg/usr DESTDIR=$startdir/pkg/usr/lib/xmms/General \
			 BMPDESTDIR=$startdir/pkg/usr/lib/bmp/General install || return 1
}
