# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Paulo Matias <matiasΘarchlinux-br·org>
# Contributor: Anders Bergh <anders1@gmail.com>
pkgname=luajit 
pkgver=1.1.5
pkgrel=2
pkgdesc="LuaJIT is a Just-In-Time Compiler for Lua 5.1. LuaJIT is based on Lua, a powerful, light-weight programming language."
arch=(i686)
url="http://luajit.org/"
depends=(readline) 
source=(http://luajit.org/download/LuaJIT-$pkgver.tar.gz luajit-arch.patch)
md5sums=('b99d244ba4fc1979946ae1025368fc5c'
         'd7834a54d74b6990d28fa6e66305787e')
license=('MIT')

build() { 
  cd "$srcdir/LuaJIT-$pkgver"

  patch -Np1 -i "$srcdir/luajit-arch.patch"

  make linux_rl || return 1
  make INSTALL_TOP=$pkgdir/usr install || return 1

  install -Dm644 COPYRIGHT "$pkgdir/usr/share/licenses/luajit/COPYRIGHT"

  # Cleanup
  rm -r $pkgdir/usr/include $pkgdir/usr/man
}
