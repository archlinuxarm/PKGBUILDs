# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Giovanni Scafora <giovanni@archlinux.org>
# Contributor: Andrea Scarpino <bash.lnx@gmail.com>

pkgname=qsopcast
pkgver=0.3.5
pkgrel=4
pkgdesc="A Qt front-end to p2p TV sopcast"
arch=('i686') # sopcast only available on i686
url="http://code.google.com/p/qsopcast"
license=('GPL2')
depends=('qt3' 'alsa-lib' 'sopcast')
source=(http://qsopcast.googlecode.com/files/$pkgname-$pkgver.tar.bz2 qsopcast.desktop qsopcast-gcc-4.3.3.patch)
md5sums=('38834f49f12b955b2270a47c9e0153f9' 
         '37d269312aa6961e30ef11f95b2341b7'
         'b815fbc0a545ffc50d888d2a70c58ac7')

build() {
  cd $srcdir/$pkgname-$pkgver/src
  . /etc/profile.d/qt3.sh
  export PATH=$QTDIR/bin:$PATH
  export QMAKESPEC=$QTDIR/mkspecs/linux-g++
  sed -i "s:/usr/local:/usr:g" qsopcast.pro main.cpp
  qmake || return 1
  sed -i "s:/usr/X11R6/:/usr/:g" Makefile
  patch -Np0 -i $srcdir/qsopcast-gcc-4.3.3.patch || return 1
  make || return 1
  make INSTALL_ROOT=$pkgdir install
  install -D -m644 ../../qsopcast.desktop $pkgdir/usr/share/applications/qsopcast.desktop
  install -D -m644 icons/mozart.xpm $pkgdir/usr/share/pixmaps/qsopcast.xpm
}

