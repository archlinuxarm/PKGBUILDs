# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Sergej Pupykin <pupykin.s+arch@gmail.com>

pkgname=pyaim
pkgver=0.8a
pkgrel=1
pkgdesc="jabber aim transport"
arch=('i686' 'x86_64')
url="http://code.google.com/p/pyaimt/"
license=('GPL')
backup=(etc/ejabberd/pyaim.xml)
depends=('python' 'twisted')
options=('force')
source=(http://pyaimt.googlecode.com/files/pyaim-t-$pkgver.tar.gz \
        pyaim.rc \
	config.xml)
md5sums=('913ad86d0fa7015d9d3eb9cd65206b98'
         '0c236a843d0d711205acb85222a947c8'
         'bf89b68fe527764cc9e6a059dc36ef2b')

build()
{
    cd $startdir/src

    install -d -m0755 $startdir/pkg/usr/lib
    cp -r $pkgname-t-$pkgver $startdir/pkg/usr/lib
    mv $startdir/pkg/usr/lib/$pkgname-t-$pkgver $startdir/pkg/usr/lib/$pkgname-t
    install -d -m0755 $startdir/pkg/var/spool/pyaimt
    install -D -m0644 ./config.xml $startdir/pkg/etc/ejabberd/pyaim.xml
    mv $startdir/pkg/usr/lib/$pkgname-t/config_example.xml $startdir/pkg/etc/ejabberd/pyaim_example.xml
    ln -s ../../../etc/ejabberd/pyaim.xml $startdir/pkg/usr/lib/$pkgname-t/config.xml
    install -D -m0755 pyaim.rc $startdir/pkg/etc/rc.d/pyaimt
}
