# Maintainer: Hans Janssen <janserv@gmail.com>
# Contributor: my64 <packages@obordes.com>
# Contributor: Colin Pitrat <colin.pitrat@gmail.com>

pkgname=openscenegraph
pkgver=2.8.2
pkgrel=1
pkgdesc="An Open Source, high performance real-time graphics toolkit"
arch=('i686' 'x86_64')
license=('OSGPL')
url="http://www.openscenegraph.org"
depends=('giflib' 'jasper' 'librsvg' 'xine-lib' 'curl' 'pth')
makedepends=('cmake')
conflicts=(openthreads)
provides=(openthreads)
#source=(http://www.openscenegraph.org/downloads/stable_releases/OpenSceneGraph-$pkgver/source/OpenSceneGraph-$pkgver.zip)
source=(http://www.openscenegraph.org/downloads/developer_releases/OpenSceneGraph-$pkgver.zip)
md5sums=('99d0b37f403b85b4559514b6b9849d9e')

build() {
  cd $startdir/src/OpenSceneGraph-$pkgver
  cmake . -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release
  make || return 1
  make DESTDIR=$startdir/pkg install || return 1
  install -D -m644 LICENSE.txt $startdir/pkg/usr/share/licenses/$pkgname/LICENSE || return 1

  [ -d $pkgdir/usr/lib64 ] && mv $pkgdir/usr/lib64 $pkgdir/usr/lib || true
}
