# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>

pkgname=stalonetray
pkgver=0.7.6
pkgrel=3
pkgdesc="STAnd-aLONE sysTRAY. It has minimal build and run-time dependencies: the Xlib only."
arch=('i686' 'x86_64')
url="http://stalonetray.sourceforge.net"
license=('GPL')
depends=('libx11')
source=(http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.bz2)
md5sums=('eebb46182b64d75b89776bbfc867f470')

build() {
  cd $startdir/src/$pkgname-$pkgver

  sed -i 's|if (strcmp(settings.wnd_type, _NET_WM_WINDOW_TYPE_NORMAL) == 0)|if (strcmp(settings.wnd_type, _NET_WM_WINDOW_TYPE_NORMAL) != 0)|' src/tray.c

  ./configure --prefix=/usr
  make || return 1
  make DESTDIR=$startdir/pkg install
  
  #install sample config file
  install -D -m644 stalonetrayrc.sample $startdir/pkg/etc/stalonetrayrc
}
