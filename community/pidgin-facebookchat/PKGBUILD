# $Id: PKGBUILD 3216 2009-09-30 18:32:11Z andrea $
# Maintainer: Andrea Scarpino <andrea@archlinux.org>
# Contributor: Angel 'angvp' Velasquez <angvp[at]archlinux.com.ve> 
# Contributor: Max Fehrm max.fehrm@gmail.com

pkgname=pidgin-facebookchat
pkgver=1.61
pkgrel=2
pkgdesc="Facebook chat plugin for Pidgin and libpurple messengers."
url='http://code.google.com/p/pidgin-facebookchat/'
license=('GPL3')
depends=('pidgin' 'json-glib>=0.7.4')
arch=('i686' 'x86_64')
source=("http://pidgin-facebookchat.googlecode.com/files/$pkgname-source-$pkgver.tar.bz2")
md5sums=('9e78f200710d2dc8134d4e9e5f237618')

build() {
  cd ${srcdir}/$pkgname
  if [ "$CARCH" = "x86_64" ]; then
    make LINUX64_COMPILER=x86_64-unknown-linux-gnu-gcc libfacebook64.so  || return 1
    install -D -m644 libfacebook64.so \
      ${pkgdir}/usr/lib/purple-2/libfacebook64.so || return 1
  else
    make libfacebook.so  || return 1
    install -D -m644 libfacebook.so \
      ${pkgdir}/usr/lib/purple-2/libfacebook.so || return 1
  fi

  for i in 16 22 48; do
    install -D -m644 facebook${i}.png \
      ${pkgdir}/usr/share/pixmaps/pidgin/protocols/${i}/facebook.png || return 1
  done
}
