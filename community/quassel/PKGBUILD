# $Id: PKGBUILD 3463 2009-10-03 17:33:07Z ibiru $
# Maintainer: Vesa Kaihlavirta <vegai@iki.fi>

pkgname=quassel
pkgver=0.4.1
pkgrel=2
pkgdesc="QT4 irc client with a separated core"
url="http://quassel-irc.org"
arch=('i686' 'x86_64')
license=('GPL')
depends=('kdelibs' 'oxygen-icons')
makedepends=('cmake' 'automoc4')
source=("$url/system/files/$pkgname-$pkgver.tar.bz2"
	'rc.quassel')
install=quassel.install
md5sums=('bf89e3ff2e12c64d9cf8b1445e46039f'
         '3b0b807f404bbe5f0ddcf74d5f19ab55')

build() {
  cd ${srcdir}

  mkdir build
  cd build

  cmake -D CMAKE_INSTALL_PREFIX=/usr/ -DWITH_KDE=1 -D CMAKE_BUILD_TYPE="Release" ../$pkgname-$pkgver/ -Wno-dev || return 1
  make || return 1
  make DESTDIR=${pkgdir} install

  install -D -m755 ${srcdir}/rc.quassel \
    ${pkgdir}/etc/rc.d/quassel || return 1
}
