# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Eric Belanger <eric@archlinux.org>
# Contributor:  Oliver Willemse <olli (at) xs4all (d0t) nl>

pkgname=tuxcards
pkgver=2.1.1
pkgrel=1
pkgdesc="TuxCards is a hierarchical notebook"
arch=('i686' 'x86_64')
url="http://blog.rajgad.com/software-and-projects/"
license=("GPL")
depends=('qt3')
options=('!makeflags')
source=(http://downloads.sourceforge.net/tuxcards/$pkgname-$pkgver-src.tar.gz)
md5sums=('886ba94719a14c53b4b347630af3a944')
sha1sums=('e3068f83d5b46d5d34f4426319e25f95fc9062e3')

build() {
  source /etc/profile.d/qt3.sh
  cd $startdir/src/$pkgname
  sed -i 's|<includehint>ccolorbar.h</includehint>||' src/gui/dialogs/optionsDialog/IOptionsDialog.ui || return 1
  qmake tuxcards.pro
  sed -i 's|ln -sf $(TARGET) /usr/local/bin/||' Makefile || return 1
  make || return 1
  make INSTALL_ROOT=$startdir/pkg DESTDIR=/usr/share/tuxcards install
  install -D -m755 tuxcards $startdir/pkg/usr/bin/tuxcards
  install -D -m644 src/icons/lo16-app-tuxcards.xpm $startdir/pkg/usr/share/pixmaps/tuxcards16.xpm
  install -D -m644 src/icons/lo32-app-tuxcards.xpm $startdir/pkg/usr/share/pixmaps/tuxcards32.xpm
  find $startdir/pkg/usr/share -type f -exec chmod 644 {} \;
}
