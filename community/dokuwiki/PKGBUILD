# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Sergej Pupykin <pupykin.s+arch@gmail.com>

pkgname=dokuwiki
pkgver=20090214b
_pkgver=2009-02-14b
pkgrel=1
pkgdesc="DokuWiki engine"
arch=('i686' 'x86_64')
url="http://www.splitbrain.org/projects/dokuwiki"
license=('GPL')
depends=(php)
backup=()
options=(force)
install=dokuwiki.install
source=(http://www.splitbrain.org/_media/projects/dokuwiki/dokuwiki-${_pkgver}.tgz)
md5sums=('c75c4781b8698041c3c9b6b0fec2ac2e')

build() {
  cd $srcdir
  install -d -m0755 $pkgdir/srv/http && \
  mv $pkgname-${_pkgver/b/} $pkgdir/srv/http/dokuwiki && \
  touch $pkgdir/srv/http/dokuwiki/data/changes.log && \
  chmod 0644 $pkgdir/srv/http/dokuwiki/data/changes.log && \
  cd $pkgdir/srv/http/dokuwiki/data && \
  find -type f -exec chmod g=rw {} \; && find -type d -exec chmod g=rwx {} \; && \
  chmod g=rwx $pkgdir/srv/http/dokuwiki/conf
}
