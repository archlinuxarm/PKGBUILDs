# $Id: PKGBUILD 3720 2009-10-08 07:13:09Z mherych $
# Contributor: Robert Emil Berge <filoktetes@linuxophic.org>
# Maintainer: Robert Emil Berge
# Maintainer: Mateusz Herych <heniekk@gmail.com>
pkgname=openmovieeditor
pkgver=0.0.20090105
pkgrel=5
pkgdesc="A simple video editor"
arch=('i686' 'x86_64')
url="http://openmovieeditor.sourceforge.net/HomePage"
license=('GPL')
depends=('libquicktime' 'libsamplerate' 'fltk' 'jack-audio-connection-kit' 'portaudio' 'gmerlin-avdecoder')
source=(http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.gz)
md5sums=('ce4f76c0b3e90aabf9c2d5c8dd31e9b1')

build() {
  cd $startdir/src/$pkgname-$pkgver
 
  # Fix missing includes
  sed -e 's|<sstream>|<sstream>\n#include <stdint.h>|' -i src/VideoViewGL.H
  sed -e 's|<string>|<string>\n#include <stdint.h>|' -i src/WaveForm.H 
  sed -e 's|<stdint.h>|<stdint.h>\n#include <stdio.h>|' -i src/AddCommand.H
  sed -e 's|<string>|<stdint.h>\n#include <stdio.h>|' -i src/MediaBrowser.H
  sed -e 's|<iostream>|<iostream>\n#include <stdio.h>|' -i src/fl_font_browser.h

  ./configure --prefix=/usr
  make || return 1
  make DESTDIR=$startdir/pkg install
}
