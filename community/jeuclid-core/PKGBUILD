# Maintainer: Stefan Husmann <stefan-husmann@t-online.de>
# Contributor: Simon Lipp <sloonz+aur@gmail.com>

pkgname=jeuclid-core
pkgver=3.1.4
pkgrel=1
pkgdesc="MathML renderer for Java [core classes and conversion tool]"
arch=('i686' 'x86_64')
url="http://jeuclid.sourceforge.net/"
license=(APACHE)
depends=('java-batik' 'java-commons-logging' 'java-jdom')
source=("http://downloads.sourceforge.net/jeuclid/jeuclid-$pkgver-distribution.zip" fix-classpath.patch)
md5sums=('7379210482b79cbcf176039b29c87e29' 'ae15ad431216579b7bcc30f58156346e')

build() {
	cd $srcdir/jeuclid-$pkgver
	patch -p1 < $srcdir/fix-classpath.patch || return 1

	install -d $pkgdir/usr/bin/ || return 1
	install -d $pkgdir/usr/share/java/jeuclid/ || return 1
	install --mode=644 $srcdir/jeuclid-$pkgver/repo/jeuclid-core-$pkgver.jar \
	  $pkgdir/usr/share/java/jeuclid/jeuclid-core.jar || return 1
	install $srcdir/jeuclid-$pkgver/bin/mml2xxx $pkgdir/usr/bin/ || return 1
	
	# Install embedded dependencies
	pushd $srcdir/jeuclid-$pkgver/repo
	for _jar in freehep-graphicsio-swf-2.1.1.jar \
	           freehep-graphicsio-emf-2.1.1.jar \
	           freehep-export-2.1.1.jar \
		   freehep-graphicsio-gif-1.2.3.jar \
		   freehep-graphicsio-ps-2.1.1.jar \
		   freehep-graphicsio-pdf-2.1.1.jar \
		   freehep-swing-2.0.3.jar \
		   freehep-graphicsio-2.1.1.jar \
	           freehep-graphics2d-2.1.1.jar \
	           freehep-util-2.0.2.jar \
		   freehep-io-2.0.2.jar
	do
		install $srcdir/jeuclid-$pkgver/repo/${_jar} $pkgdir/usr/share/java/jeuclid/ || return 1
	done
}
