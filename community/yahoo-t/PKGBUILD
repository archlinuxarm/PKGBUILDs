# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Sergej Pupykin <pupykin.s+arch@gmail.com>

pkgname=yahoo-t
pkgver=0.4
pkgrel=1
pkgdesc="jabber yahoo transport"
arch=('i686' 'x86_64')
url="http://xmpppy.sourceforge.net/yahoo/"
license=('GPL')
depends=('python' 'xmpppy')
backup=(etc/ejabberd/yahoo.xml)
source=(http://downloads.sourceforge.net/xmpppy/yahoo-transport-$pkgver.tar.gz \
        yahoo.rc)
md5sums=('ce928c4e444b83f10fca57f77e40b558'
         'd3d287bd5ff5f0694f70cb8ccf541948')

build()
{
  cd $startdir/src
  rm -rf yahoo-transport-$pkgver/curphoo/CVS
  install -D -m0644 ./yahoo-transport-$pkgver/config_example.xml $startdir/pkg/etc/ejabberd/yahoo.xml || return 1

  install -d -m0755 $startdir/pkg/usr/lib && \
  cp -r yahoo-transport-$pkgver $startdir/pkg/usr/lib || return 1

  mv $startdir/pkg/usr/lib/yahoo-transport-$pkgver $startdir/pkg/usr/lib/yahoo-t && \
  ln -s ../../../etc/ejabberd/yahoo.xml $startdir/pkg/usr/lib/yahoo-t/config.xml && \
  install -D -m0755 yahoo.rc $startdir/pkg/etc/rc.d/yahoo-t
}
