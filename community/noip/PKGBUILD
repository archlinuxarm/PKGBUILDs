# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Contributor: Lyle Putnam <lcputnam@amerytel.net>
# Maintainer: Daenyth

pkgname=noip
pkgver=2.1.9
pkgrel=1
pkgdesc="A Dynamic DNS Client Updater for no-ip.com services"
arch=('i686' 'x86_64')
url="http://www.no-ip.com/downloads.php?page=linux"
license=('GPL')
backup=('etc/no-ip2.conf')
install=noip.install
# Note that they have the one file for the current release, so if the md5sum breaks, it means they updated.
source=('http://www.no-ip.com/client/linux/noip-duc-linux.tar.gz' 
        'noip-rc.d')

md5sums=('eed8e9ef9edfb7ddc36e187de867fe64'
         '0f094d596cd32574df912f528b7b3da0')

build() {
  cd $srcdir/$pkgname-$pkgver

  # Their Makefile is fucking horrid, do it by hand instead
  sed -i '/^#define CONFIG_FILEPATH/s/PREFIX//' noip2.c
  sed -i '/^#define CONFIG_FILENAME/s/PREFIX//' noip2.c
  gcc -Wall -g -Dlinux -DPREFIX="/usr" noip2.c -o noip2 || return 1

  install -Dm755 noip2 $pkgdir/usr/bin/noip2
  install -Dm755 $srcdir/noip-rc.d $pkgdir/etc/rc.d/noip
}
# vim:set ts=2 sw=2 et:
