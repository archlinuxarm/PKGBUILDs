# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: slubman <slubman@slubman.net>

pkgname=tktheme
pkgver=0.23
pkgrel=5
pkgdesc="A library to allow Tkabber docking in the system tray."
arch=('i686' 'x86_64')
depends=('tk' 'libxpm' 'libxmu')
license=("GPL")
source=(http://tkabber.jabber.ru/files/other/Tk_Theme-23.tgz)
url="http://tkabber.jabber.ru"
md5sums=('121c335e3b3764cbd04eea68b6a66dd3')

build() {
  cd $startdir/src/Tk_Theme-23
  tclsh configure
  make || return 1
  mkdir -p $startdir/pkg/usr/lib/tktheme && \
  cp theme.so $startdir/pkg/usr/lib/tktheme/ && \
  cp pkgIndex.tcl $startdir/pkg/usr/lib/tktheme/ && \
  sed -i 's|ifneeded Tk_Theme 20|ifneeded Tk_Theme 23|' $startdir/pkg/usr/lib/tktheme/pkgIndex.tcl
}
