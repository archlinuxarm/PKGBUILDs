# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Maintainer: tardo <tardo@nagi-fanboi.net>
# Contributor: Sergej Pupykin <pupykin.s+arch@gmail.com>

pkgname=p2c
pkgver=1.21alpha2
pkgrel=4
pkgdesc="pascal to c/c++ converter"
arch=('i686' 'x86_64')
url="http://packages.debian.org/sid/p2c"
license=('GPL')
source=(http://ftp.de.debian.org/debian/pool/main/p/p2c/p2c_$pkgver.orig.tar.gz
	http://ftp.debian.org/debian/pool/main/p/p2c/p2c_$pkgver-2.1.diff.gz)
md5sums=('769eee92c67fd2285b04af6d1999b637'
         'ae53c7d286d916390aa10f9a04acb456')

build() {
  cd ${startdir}/src/p2c-$pkgver
  patch -Np1 <../p2c_$pkgver-2.1.diff

  cd src
  make || return 1

  sed -i "s#PREFIX = /usr#PREFIX = $startdir/pkg/usr#" Makefile

  mkdir -p  $pkgdir/usr/bin \
	    $pkgdir/usr/share/man/man1 \
	    $pkgdir/usr/include/p2c

  make install
}
