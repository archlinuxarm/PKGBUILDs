# $Id: PKGBUILD 2330 2009-09-16 10:11:01Z spupykin $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>

pkgname=ajaxterm-utf8-svn
pkgver=61
pkgrel=2
pkgdesc="A web based terminal"
arch=('any')
url="http://antony.lesuisse.org/qweb/trac/wiki/AjaxTerm"
depends=('python>=2.3')
license=('GPL')
conflicts=(ajaxterm)
provides=(ajaxterm)
source=(ajaxterm)
md5sums=('a9c5ae6bb4bacf26ca2b728559311be5')

_svntrunk=http://archlinux-stuff.googlecode.com/svn/trunk/ajaxterm-utf8/
_svnmod=ajaxterm-utf8

build() {
  cd $startdir/src

  svn checkout $_svntrunk --config-dir ./ $_svnmod

  msg "SVN checkout done or server timeout"
  msg "Starting make..."

  cp -r $_svnmod $_svnmod-build
  cd $_svnmod-build

  ./configure --prefix=/usr
  install -d ${startdir}/pkg/etc/rc.d
  install -d ${startdir}/pkg/usr/bin
  install -d ${startdir}/pkg/usr/man/man1
  install -d ${startdir}/pkg/usr/share/ajaxterm
  install ajaxterm.bin ${startdir}/pkg/usr/bin/ajaxterm
  install -m 0755 ${startdir}/src/ajaxterm ${startdir}/pkg/etc/rc.d
  install -m 0644 ajaxterm.css ajaxterm.html utf8-escape.js ajaxterm.js qweb.py sarissa.js sarissa_dhtml.js ${startdir}/pkg/usr/share/ajaxterm
  install -m 0755 ajaxterm.py ${startdir}/pkg/usr/share/ajaxterm
  install -m 0644 ajaxterm.1 ${startdir}/pkg/usr/man/man1
}
