# Maintainer: Ronald van Haren <ronald.archlinux.org>

pkgname=qtoctave
pkgver=0.8.2
pkgrel=1
pkgdesc="qt frontend for octave"
url="https://forja.rediris.es/projects/csl-qtoctave/"
license=('GPL2')
depends=('qt' 'octave')
makedepends=('cmake')
source=(http://forja.rediris.es/frs/download.php/1383/${pkgname}-${pkgver}.tar.gz
	qtoctave-gcc44.patch)
install=qtoctave.install
arch=('i686' 'x86_64')
options=('!libtool' '!emptydirs')
md5sums=('56d0d7bece168b7df6a6b30d448266f4'
         'ca88a01563e2ad4ad3ae4912289b501d')
      
build() {
cd ${srcdir}/${pkgname}-${pkgver}/${pkgname}

# gcc44 patch
patch -Np0 -i ${srcdir}/qtoctave-gcc44.patch || return 1

cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_SKIP_RPATH=ON \
	-DCMAKE_BUILD_TYPE=RELEASE .
make || return 1
make DESTDIR=${pkgdir} install || return 1
}
