# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Maintainer: tobias <tobias@archlinux.org>
# Contributor: Tobias Kieslich <tobias@justdreams.de>

pkgname=gphpedit
pkgver=0.9.91
pkgrel=4
pkgdesc="a scintilla/gnome based editor specialized on php-files"
arch=(i686 x86_64)
license=('GPL')
depends=('libgnomeui>=2.18.1-2' 'libgtkhtml>=2.11.0' 'desktop-file-utils')
url="http://www.gphpedit.org/"
options=('!makeflags')
install=gphpedit.install
source=(http://archlinux-stuff.googlecode.com/files/gphpedit-$pkgver.tar.gz \
	doc-fix.patch)
md5sums=('eecd29e66b415246408b285f4edcb6a0'
         'db5e427642af2971accbcd90812ae88c')

build() {
  cd ${srcdir}/$pkgname-$pkgver
  patch -Np1 -i ${srcdir}/doc-fix.patch || return 1

  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var
  make || return 1
  make DESTDIR=${startdir}/pkg install

  # extend MimeType declaration
  echo "MimeType=application/x-php;text-x-php-text/x-php-source;" >> \
    ${startdir}/pkg/usr/share/applications/gphpedit.desktop
}
