# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Maintainer: Ondrej Jirman <megous@megous.com>

pkgname=mingw32-binutils
_pkgname=binutils
pkgver=2.19.1
pkgrel=1
arch=(i686 x86_64)
url="http://sources.redhat.com/binutils"
pkgdesc="A set of programs to assemble and manipulate binary and object files (mingw)"
depends=('glibc')
license=(GPL)
source=(http://downloads.sourceforge.net/mingw/binutils-$pkgver-mingw32-src.tar.gz)
md5sums=('ad3f2b5fdcd599a772ad75fec2c384d8')

build()
{
  cd $startdir/src/$_pkgname-$pkgver

  ./configure \
    --target=i486-mingw32 \
    --host=$CHOST \
    --build=$CHOST \
    --prefix=/usr \
    --disable-nls \
    --enable-shared || exit 1

  make || exit 1
  make install DESTDIR=$startdir/pkg || exit 1

  rm -rf $startdir/pkg/usr/{info,lib,man}
}
