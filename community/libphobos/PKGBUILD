# $Id: PKGBUILD 1904 2009-09-05 21:38:54Z cbrannon $
# Maintainer: Chris Brannon <cmbrannon79@gmail.com>
# Contributor: Andrea Scarpino <andrea@archlinux.org>
# Contributor: Anders Bergh <anders1@gmail.com>
# Contributor: Dawid Ciezarkiewicz <dawid.ciezarkiewicz@jabster.pl>

pkgname=libphobos
pkgver=1.047
pkgrel=1
pkgdesc="Runtime library for the D programming language"
arch=('i686')
url="http://www.digitalmars.com/d/1.0/"
source=(http://ftp.digitalmars.com/dmd.$pkgver.zip dmd.conf)
md5sums=('218c386c1d9363071b971614a988150d'
         'e93f0ccb1e5c00cd222af5a9be3f599a')
depends=(dmd=$pkgver)
license=('custom')
conflicts=('libtango')

build() {
  install -d $pkgdir/usr/include/d
  cd $srcdir/dmd/src/phobos
  cp -Rf std $pkgdir/usr/include/d || return 1
  cp -Rf etc $pkgdir/usr/include/d || return 1
  cp -Rf internal $pkgdir/usr/include/d || return 1
  cp -f {crc32,object,gcstats}.d $pkgdir/usr/include/d || return 1

  install -Dm644 $srcdir/dmd/linux/lib/libphobos.a $pkgdir/usr/lib/libphobos.a || return 1
  install -Dm644 "$srcdir/dmd.conf" "$pkgdir/etc/dmd.conf" || return 1

  install -Dm644 phoboslicense.txt $pkgdir/usr/share/licenses/$pkgname/LICENSE || return 1
}
