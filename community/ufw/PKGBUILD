# Contributor: Kessia 'even' Pinheiro <kessiapinheiro at gmail.com>
# Contributor: Sorin Ionescu <sorin.ionescu@gmail.com>
pkgname=ufw
pkgver=0.27
pkgrel=1
pkgdesc="A simple tool to manage a local host-based firewall"
arch=('i686' 'x86_64')
url="https://launchpad.net/ufw"
license=('GPL3')
backup=('etc/ufw/before.rules'
        'etc/ufw/after.rules'
        'etc/ufw/ufw.conf'
	'etc/ufw/user.rules'
        'etc/ufw/sysctl.conf'
        'etc/default/ufw'
        'var/lib/ufw/user.rules')
depends=('iptables>=1.4' 'python>=2.5' 'sed>=3.95')
source=("http://archive.ubuntu.com/ubuntu/pool/main/u/${pkgname}/${pkgname}_${pkgver}.orig.tar.gz"
        'http://archive.ubuntu.com/ubuntu/pool/main/l/lsb/lsb_3.2-14ubuntu2.tar.gz')
md5sums=('acad0f150d7c58dccd97348215c1652f'
         '79bc86603bd4c30247d116c4a499f9ba')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  install -D -m0644 ${srcdir}/lsb-3.2/init-functions ${pkgdir}/lib/lsb/init-functions || return 1

  python setup.py install --root=${pkgdir} || return 1
  install -D -m0755 -o root -g root ${srcdir}/${pkgname}-${pkgver}/doc/initscript.example ${pkgdir}/etc/rc.d/ufw || return 1
  sed -i 's,init.d,rc.d,' ${pkgdir}/etc/rc.d/ufw || return 1
}
