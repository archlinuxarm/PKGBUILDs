# Contributor: Jaroslaw Swierczynski <swiergot@aur.archlinux.org>
# Contributor: Roman Kyrylych <Roman.Kyrylych@gmail.com>
# Contributor: Rabyte <rabyte [at] gmail (dot) com>

pkgname=assaultcube
pkgver=1.0.2
pkgrel=2
pkgdesc="A realistic team oriented multiplayer FPS based on the Cube engine"
arch=('i686' 'x86_64')
url="http://assault.cubers.net/"
license=('ZLIB' 'custom')
replaces=('actioncube')
depends=('sdl_mixer' 'sdl_image' 'mesa' 'openal')
source=(http://downloads.sourceforge.net/actiongame/AssaultCube_v$pkgver.tar.bz2)
md5sums=('e083182699e65c240d8c7fa051644e6f')

build() {
  cd $startdir/src/AssaultCube_v$pkgver/source/src

  make || return 1
  strip ac_{client,server}
  install -D ac_client $startdir/pkg/usr/bin/ac_client
  install -D ac_server $startdir/pkg/usr/bin/ac_server
  install -D $startdir/assaultcube $startdir/pkg/usr/bin/assaultcube
  install -D $startdir/assaultcube-server $startdir/pkg/usr/bin/assaultcube-server

  mkdir -p $startdir/pkg/usr/share/assaultcube/packages
  cd $startdir/src/AssaultCube_v$pkgver
  cp -rf config packages bot $startdir/pkg/usr/share/assaultcube

  install -Dm644 $startdir/assaultcube.png $startdir/pkg/usr/share/pixmaps/assaultcube.png
  install -Dm644 $startdir/assaultcube.desktop $startdir/pkg/usr/share/applications/assaultcube.desktop
  install -Dm644 docs/package_copyrights.txt ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}
