# $Id: PKGBUILD 82 2009-07-17 19:56:55Z aaron $
# Maintainer: Giovanni Scafora <giovanni@archlinux.org>
# Contributor: Essien Ita Essien <me@essienitaessien.com>
# Contributor: Brice Mealier <mealier_brice@yahoo.fr>

pkgname=omniorb
pkgver=4.1.3
pkgrel=1
pkgdesc="A CORBA object request broker for C++ and Python."
arch=('i686' 'x86_64')
url="http://omniorb.sourceforge.net/"
license=('GPL2' 'LGPL2')
depends=('gcc-libs' 'python' 'openssl')
makedepends=('pkgconfig')
source=(http://downloads.sourceforge.net/omniorb/omniORB-$pkgver.tar.gz)
md5sums=('8a7b583e98ee78f10d8c43014dcaa923')

build() {
  cd $startdir/src/omniORB-$pkgver
  ./configure --prefix=/usr --with-omniORB-config=/etc/omniorb/omniORB.cfg \
              --with-omniNames-logdir=/var/log/omniORB --with-openssl=/usr
  make || return 1
  make DESTDIR=$startdir/pkg install
  for i in man/man1/*.1; do
    install -D -m 644 $i $startdir/pkg/usr/share/$i
  done
  chmod 755 $startdir/pkg/{usr,usr/bin,usr/lib,usr/share,usr/include,usr/share/idl,usr/lib/pkgconfig,usr/lib/python2.6,usr/lib/python2.6/site-packages}
}
