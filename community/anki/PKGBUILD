# $Id: PKGBUILD 850 2009-08-06 15:19:34Z spupykin $
# Maintainer: Timm Preetz <timm@preetz.us>
# Contributor: Michael 'manveru' Fellinger <m.fellinger@gmail.com>

pkgname=anki
pkgver=0.9.9.8.5
pkgrel=2
pkgdesc='Helps you remember facts (like words/phrases in a foreign language) efficiently.'
url='http://ichi2.net/anki/'
license=("GPL")
arch=('any')
options=(force)
depends=('pyqt' 'python-sqlalchemy' 'python-simplejson' 'python-pysqlite')
makedepends=('setuptools' 'desktop-file-utils')
source=(http://ichi2.net/$pkgname/download/files/$pkgname-$pkgver.tgz)
md5sums=('42c8f6ba29e5052b8e3323a89b76b20b')

build() {
  cd $startdir/src/$pkgname-$pkgver

  export PYTHONPATH=$srcdir/$pkgname-$pkgver/libanki

  (cd libanki && python setup.py install --root $startdir/pkg) && \
  python setup.py install --root $startdir/pkg || return 1

  # .desktop file and icon
  desktop-file-install --dir $startdir/pkg/usr/share/applications $pkgname.desktop && \
  install -D -m 644 icons/$pkgname.png $pkgdir/usr/share/pixmaps/$pkgname.png
}
