# Maintainer: Erik Andersson <erik.h.andersson@gmail.com>

# libegl, libgles and integration tests for Mali T604. 
# Ripped from Chrome OS. 

buildarch=4

pkgname="libegl-mali-t604"
pkgver=0.45
pkgrel=6
arch=('armv7h')
url="http://www.google.com/intl/en/chrome/devices/samsung-chromebook.html"
license=('Proprietary')
makedepends=()
source=('libegl-mali-t604.tar.gz')
md5sums=('7fb05be0d2c535007557a438d226f645') 
provides=('libegl' 'libgles')
conflicts=('libegl' 'libgles')
replaces=('libegl' 'libgles')

package() {
  pkgdesc="EGL & GLES implementation for Mali-T604"
  install -D "${srcdir}/${pkgname}/mali_egl_integration_tests" "${pkgdir}/usr/bin/mali_egl_integration_tests"
  install -D "${srcdir}/${pkgname}/mali_gles1_integration_suite" "${pkgdir}/usr/bin/mali_gles1_integration_suite"
  install -D "${srcdir}/${pkgname}/mali_gles2_integration_suite" "${pkgdir}/usr/bin/mali_gles2_integration_suite"
  install -D "${srcdir}/${pkgname}/libmali.so.0.${pkgver}" "${pkgdir}/usr/lib/libmali.so.0.${pkgver}"
  install -Dm644 "${srcdir}/${pkgname}/LICENSE" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
  ln -s "libmali.so.0.${pkgver}" "${pkgdir}/usr/lib/libmali.so"
  ln -s "libmali.so.0.${pkgver}" "${pkgdir}/usr/lib/libmali.so.0"
  ln -s "libmali.so.0.${pkgver}" "${pkgdir}/usr/lib/libEGL.so"
  ln -s "libmali.so.0.${pkgver}" "${pkgdir}/usr/lib/libEGL.so.1"
  ln -s "libmali.so.0.${pkgver}" "${pkgdir}/usr/lib/libEGL.so.1.${pkgver}"
  ln -s "libmali.so.0.${pkgver}" "${pkgdir}/usr/lib/libGLESv1_CM.so"
  ln -s "libmali.so.0.${pkgver}" "${pkgdir}/usr/lib/libGLESv1_CM.so.1"
  ln -s "libmali.so.0.${pkgver}" "${pkgdir}/usr/lib/libGLESv1_CM.so.1.${pkgver}"
  ln -s "libmali.so.0.${pkgver}" "${pkgdir}/usr/lib/libGLESv2.so"
  ln -s "libmali.so.0.${pkgver}" "${pkgdir}/usr/lib/libGLESv2.so.2"
  ln -s "libmali.so.0.${pkgver}" "${pkgdir}/usr/lib/libGLESv2.so.2.${pkgver}"
}
