# Maintainer: <nico.nell@gmail.com>
# Maintainer: <andrea@archlinux.org>

buildarch=28

_pkgbasename=bcm2835
pkgname=libbcm2835
pkgver=1.69
pkgrel=1
pkgdesc="C library for Broadcom BCM 2835 as used in Raspberry Pi"
url="http://www.airspayce.com/mikem/bcm2835/"
arch=('armv6h' 'armv7h' 'aarch64')
license=('GPL')
source=("http://www.airspayce.com/mikem/${_pkgbasename}/${_pkgbasename}-${pkgver}.tar.gz")
sha256sums=('2914ee1102914686c98165ee719f943a6a28d8b2f8271fecdec08f51bb8a5b8d')

build() {
  cd ${_pkgbasename}-${pkgver}
  [[ $CARCH == "aarch64" ]] && CFLAGS+=" -fPIC" && CXXFLAGS+=" -fPIC"
  ./configure --prefix=/usr
  make
}

package() {
  cd ${_pkgbasename}-${pkgver} 
  make DESTDIR="${pkgdir}" install
}

