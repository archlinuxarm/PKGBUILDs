# Maintainer: Ettore Chimenti <ek5.chimenti@gmail.com>

pkgname=xf86-video-vivante-dri
pkgver=3.0.35_4.0.0
pkgrel=1
epoch=0
pkgdesc="Binary files for Vivante GPU for i.MX6Q"
arch=('armv7h')
url="http://http://opensource.freescale.com/"
license=('proprietary')
groups=()
depends=('gpu-viv-bin-mx6q' 'randrproto' 'xorg-server-devel' 'xorg-util-macros' 'xorg-server')
makedepends=()
checkdepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
realname="xserver-xorg-video-imx-viv"
source=(http://download.ossystems.com.br/bsp/freescale/source/$realname-${pkgver//_/-}.tar.gz
	configure.ac.patch
	vivante_common.h.patch)
noextract=()
md5sums=('5c5b5be029b077346610518bb729c012'
         '6491a8a07a29738da15d17a2374e7789'
         '3bb73e6ab7fda37f204416fa2ece2877')

prepare(){
	patch "$srcdir/$realname-${pkgver//_/-}/EXA/configure.ac" < configure.ac.patch
	patch "$srcdir/$realname-${pkgver//_/-}/EXA/src/vivante_util/vivante_common.h" < vivante_common.h.patch
	#patch "$srcdir/$realname-${pkgver//_/-}/EXA/configure.ac" < configure.ac.patch

	#cd "$srcdir/"
	#if [ -d "$realname-${pkgver//_/-}" ]
	# then
	#  rm -r "$realname-${pkgver//_/-}"
	#fi
	  
} 

build(){
	cd "$srcdir/$realname-${pkgver//_/-}"
	./build.sh
}

package() {
	mv $srcdir/$realname-${pkgver//_/-}/* "$pkgdir/"
}
