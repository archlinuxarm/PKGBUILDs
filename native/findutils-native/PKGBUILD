# Maintainer: Alexander Foremny <alexanderforemny@gmail.com>

pkgname=findutils-native
pkgver=4.4.2
pkgrel=1
pkgdesc="GNU utilities to locate files"
arch=(i686 x86_64)
license=(GPL3)
depends=(glibc-native)
url="http://www.gnu.org/software/findutils"
source=(ftp://ftp.gnu.org/pub/gnu/findutils/findutils-$pkgver.tar.gz)
md5sums=('351cc4adb07d54877fa15f75fb77d39f')

_PREFIX=/usr/arm-softfloat-linux-gnueabi
_LIBDIR=/usr/lib/$CARCH
_LINKER=$_LIBDIR/ld-linux.so.2

build() {
  cd "$srcdir/findutils-$pkgver"

  ./configure --prefix=$_PREFIX
  make LDFLAGS="-Wl,-dynamic-linker,$_LINKER" || return 1
  make DESTDIR="$pkgdir" install

  rm -rf "$pkgdir$_PREFIX/libexec"
  rm -rf "$pkgdir$_PREFIX/var"

  # Remove binaries supplied by slocate.
  for bin in locate updatedb; do
    rm -rf "$pkgdir$_PREFIX/bin/$bin"
  done

  # Remove man and info pages.
  for dir in man info; do
    rm -rf "$pkgdir$_PREFIX/share/$dir"
  done
}

# vim: set ft=sh ts=2 sw=2 et:
