# Maintainer: Manuel Rotter <rotter.manuel@gmail.com> 

pkgname=fakeroot-native
_pkgname=fakeroot
pkgver=1.14.3
pkgrel=1
pkgdesc="Gives a fake root environment, useful for building packages as a non-privileged user"
arch=(i686 x86_64)
license=('GPL')
url="http://packages.debian.org/fakeroot"
groups=('base-devel')
install=fakeroot.install
depends=('glibc-native' 'filesystem' 'grep' 'sed' 'bash-native')
options=('!libtool')
source=(http://ftp.debian.org/debian/pool/main/f/$_pkgname/${_pkgname}_${pkgver}.tar.gz)
md5sums=('ca68f84e0340068eaaa38aab01f10d47')

_PREFIX=/usr/arm-softfloat-linux-gnueabi
_LIBDIR=/usr/lib/$CARCH
_LINKER=$_LIBDIR/ld-linux.so.2

build() {
  cd ${srcdir}/$_pkgname-$pkgver
  ./configure --prefix=$_PREFIX --build=$CHOST --host=$CHOST \
  --target=arm-softfloat-linux-gnueabi --libdir=/usr/lib/libfakeroot \
  --disable-static --with-ipc=sysv
  make LDFLAGS="-Wl,-dynamic-linker,$_LINKER" || return 1
  make DESTDIR=${pkgdir} install || return 1
  # install README for sysv/tcp usage
  install -Dm644 $srcdir/$_pkgname-$pkgver/README $pkgdir/usr/share/doc/$pkgname/README
}
