# Maintainer: Mike Staszel <mikestaszel@plugapps.com>

# PlugApps changes: inittab has a line for ttyS0 at 115200, 2 ttys
#                   for armv5te, 6 for armv7
#                   rc.shutdown has an LED turn-off line
#                   rc.conf is different
#                   rc.sysinit has our copyright info

pkgname=initscripts
pkgver=2011.05.2
pkgrel=1
pkgdesc="System initialization/bootup scripts"
plugrel=1
arch=('arm' 'armv7')
url="http://www.archlinuxarm.org"
license=('GPL2')
groups=('base')
backup=(etc/inittab etc/rc.conf etc/rc.local etc/rc.local.shutdown etc/conf.d/wireless)
depends=('bash' 'grep' 'coreutils' 'udev>=167'
         'net-tools' 'ncurses' 'kbd' 'findutils' 'sysvinit')
optdepends=('bridge-utils: Network bridging support'
            'dhcpcd: DHCP network configuration'
            'wireless_tools: Wireless networking')
install=initscripts.install
source=(adjtime
        functions
        hwclock
        inittab
        inittab.armv7
        Makefile
        minilogd.c
        netfs
        network
        rc.conf
        rc.d
        rc.local
        rc.local.shutdown
        rc.multi
        rc.shutdown
        rc.single
        rc.sysinit
        wireless.conf.d)
md5sums=('f976a1c61c2fb9bd2c30e3fdd0d62b61'
         '1aad77c872e7d3b3f9f4c3ba79b515c3'
         '16fa1f14f10fc8c1daf04f4b5edb9cab'
         'ac7be5551669fc867e330440e0151067'
         'c6ceb8c7d4820a37b8bf0c827a6916ec'
         '366e82ff2faeee4bd72a0b578963235d'
         '2c2dcc7ce7586f27fc5e6887f8ec74b8'
         '565f1f24c5dc765831a58622f65844af'
         'b2469f09d0ae5143b91c182b1d802194'
         '0559c8a54a1a2720c53f8974143f246d'
         '66f90c041410bcf72b5c2747677d7780'
         'bd236a57bc00aa4727b98c5ae401c457'
         '669ce6d766dd9deb86686219f3763fe4'
         '986ca9250756b12f0cb5f517ccb8bc47'
         'bdec56c7d6964875c3b3ecaf3bbe58dd'
         '6d77bdeeb65958171881fe15589d8c6a'
         'bac8777077243c0cfefa093621370071'
         '027576534885b8d5dded9be546057b12')

package() {
  cd ${srcdir}
  make DESTDIR=${pkgdir} install
  install -D -m644 ${srcdir}/wireless.conf.d ${pkgdir}/etc/conf.d/wireless

  # On the armv7 boards, all ttys are enabled in this inittab file
  if [ "${CARCH}" = "armv7" ]; then
     install -D -m644 inittab.armv7 ${pkgdir}/etc/inittab
  fi
}
