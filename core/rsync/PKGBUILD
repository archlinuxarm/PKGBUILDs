# Maintainer: Alexander Foremny <alexanderforemny@gmail.com>

pkgname=rsync
pkgver=3.0.6
pkgrel=2
pkgdesc="A file transfer program to keep remote files in sync"
groups=('base-devel')
arch=('arm')
url="http://samba.anu.edu.au/rsync/"
license=('GPL3')
depends=('acl')
backup=('etc/rsyncd.conf' 'etc/xinetd.d/rsync')
source=(http://rsync.samba.org/ftp/rsync/${pkgname}-${pkgver}.tar.gz \
        rsyncd.conf rsyncd rsync.xinetd)

build() {
  cd ${srcdir}/rsync-${pkgver}

  ./prepare-source || return 1
  ./configure --prefix=/usr --with-included-popt \
              --enable-acl-support --enable-xattr-support || return 1
  make || return 1
  make DESTDIR=${pkgdir} install || return 1

  install -D -m 755 ../rsyncd ${pkgdir}/etc/rc.d/rsyncd || return 1
  install -D -m 644 ../rsyncd.conf ${pkgdir}/etc/rsyncd.conf || return 1
  install -D -m 644 ../rsync.xinetd ${pkgdir}/etc/xinetd.d/rsync || return 1
}

