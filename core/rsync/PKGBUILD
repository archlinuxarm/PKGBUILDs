# Maintainer: Alexander Foremny <alexanderforemny@gmail.com>
# Modified by OpenPogo

pkgname=rsync
pkgver=3.0.6
pkgrel=2
pkgdesc="A file transfer program to keep remote files in sync"
groups=('base-devel')
arch=('arm')
url="http://samba.anu.edu.au/rsync/"
license=('GPL3')
depends=('acl')
backup=('opt/etc/rsyncd.conf'
		'opt/etc/xinetd.d/rsync')
source=(http://rsync.samba.org/ftp/$pkgname/$pkgname-$pkgver.tar.gz
        rsyncd.conf
        rsyncd
        rsync.xinetd)
md5sums=('e9865d093a18e4668b9d31b635dc8e99'
	 'aeb04786ee7cba9221a8eca7279cdfcb'
	 '64ec3de7539d07be2ee6f6339cd23ae4'
	 'c9627d35fa175cf84565f46602c21e98')

build() {
  cd $srcdir/$pkgname-$pkgver

  ./prepare-source || return 1
  ./configure --prefix=/opt --with-included-popt \
              --enable-acl-support --enable-xattr-support || return 1
  make || return 1
  make DESTDIR=$pkgdir install || return 1

  install -D -m 755 ../rsyncd $pkgdir/opt/etc/rc.d/rsyncd || return 1
  install -D -m 644 ../rsyncd.conf $pkgdir/opt/etc/rsyncd.conf || return 1
  install -D -m 644 ../rsync.xinetd $pkgdir/opt/etc/xinetd.d/rsync || return 1
}
