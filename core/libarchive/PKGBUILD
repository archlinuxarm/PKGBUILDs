# Maintainer: Alexander Foremny <alexanderforemny@gmail.com>

pkgname=libarchive
pkgver=2.7.0
pkgrel=1
pkgdesc="Library that can create and read several streaming archive formats"
arch=('arm')
url="http://people.freebsd.org/~kientzle/libarchive/"
license=(BSD)
groups=(base)
depends=(zlib bzip2 acl)
source=(http://libarchive.googlecode.com/files/libarchive-$pkgver.tar.gz)
md5sums=('a2103ca334037562ad327eb3aed54869')

# pacman.static build fails unless we keep the libtool files (or unless we link
# the missing symbols inside the libarchive .a static lib, but that is dirty)
options=(libtool)

build() {
  cd "$srcdir/libarchive-$pkgver"

  ./configure --prefix=/usr
  make || return 1
  make DESTDIR="$pkgdir" install || return 1

  install -Dm644 COPYING "$pkgdir/usr/share/licenses/libarchive/COPYING"
}
